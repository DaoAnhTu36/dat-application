<div class="container-fluid">
  <div class="row">
    <div class="col-md-12 item-form">
      <h1 style="text-align: center">Máy bán hàng</h1>
    </div>
    <div class="col-md-12 item-form">
      <div class="form-group">
        <label for="goodsCode">Mã sản phẩm</label>
        <input
          type="text"
          class="form-control"
          name="goodsCode"
          id="goodsCode"
          placeholder=""
          (keyup)="onSearchGoods($event)"
          [(ngModel)]="goodsCode"
        />
        <table class="table table-bordered table-hover ShowSearchResult">
          <tbody>
            <tr
              *ngFor="let item of listGoodsRetail?.list; let i = index"
              (click)="onSelectGoods(item)"
            >
              <td>{{ i + 1 }}</td>
              <td>{{ item.goodsCode }}</td>
              <td>{{ item.goodsName }}</td>
              <td>
                {{item.goodsRetails?.[0]?.price ?? '' | customCurrencyPipe}}
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
    <div class="product-added">
      <table class="table">
        <thead>
          <tr>
            <th>#</th>
            <th>Mã</th>
            <th>Tên</th>
            <th>Đơn vị tính</th>
            <th>Giá</th>
            <th>Số lượng</th>
            <th colspan="2">Tổng tiền</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of data_buy; let i = index">
            <td>{{ i + 1 }}</td>
            <td>{{ item.goodsCode }}</td>
            <td>{{ item.goodsName }}</td>
            <td>{{ item.unitName }}</td>
            <td>{{ item.price | customCurrencyPipe }}</td>
            <td>
              <input
                type="number"
                min="1"
                class="form-control"
                name="quantity"
                id="quantity"
                [(ngModel)]="item.quantity"
                (keyup)="onCalTotalBill(i, item.quantity)"
                (change)="onCalTotalBill(i, item.quantity)"
              />
            </td>
            <td>{{ item.price * item.quantity | customCurrencyPipe }}</td>
            <td>
              <button
                type="button"
                class="btn btn-danger"
                (click)="onDelete(i)"
              >
                Xóa
              </button>
            </td>
          </tr>
          <tr>
            <td colspan="5"></td>
            <td style="font-weight: bold">Tổng hóa đơn</td>
            <td colspan="2" style="color: darkgreen">
              {{ totalBill | customCurrencyPipe }}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="col-md-12 item-form btn-payment">
      <button type="button" class="btn btn-success" (click)="onPay()">
        Thanh toán
      </button>
    </div>
  </div>
</div>
